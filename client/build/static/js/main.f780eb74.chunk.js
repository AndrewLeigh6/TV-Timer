(this["webpackJsonptv-timer"]=this["webpackJsonptv-timer"]||[]).push([[0],{17:function(e,t,a){e.exports={Input:"Input_Input__2Ggkr",Search:"Input_Search__3DFFl",Time:"Input_Time__3jAPB",Break:"Input_Break__2eEin"}},18:function(e,t,a){e.exports={TimeCalculator:"TimeCalculator_TimeCalculator__37Aay",BreakInputContainer:"TimeCalculator_BreakInputContainer__1AjjW",MediaDetailsContainer:"TimeCalculator_MediaDetailsContainer__15sPd",TimeInputContainer:"TimeCalculator_TimeInputContainer__2bahq"}},20:function(e,t,a){e.exports={MediaDetails:"MediaDetails_MediaDetails__3XP2p",Poster:"MediaDetails_Poster__18Cxw",Title:"MediaDetails_Title__1N-p5"}},21:function(e,t,a){e.exports={BreakInputBlock:"BreakInputBlock_BreakInputBlock__3Nz_s"}},24:function(e,t,a){e.exports={TimeInputBlock:"TimeInputBlock_TimeInputBlock__1OvDW",TimeInputContainer:"TimeInputBlock_TimeInputContainer__3G2Sx"}},38:function(e,t,a){e.exports={Layout:"Layout_Layout__1LMq8"}},39:function(e,t,a){e.exports={Logo:"Logo_Logo__13e8W"}},40:function(e,t,a){e.exports={SearchBar:"SearchBar_SearchBar__3GNye"}},41:function(e,t,a){e.exports={SearchResults:"SearchResults_SearchResults__1k8eR"}},46:function(e,t,a){e.exports=a(74)},51:function(e,t,a){},7:function(e,t,a){e.exports={Button:"Button_Button__2LtEj",MaxWidth:"Button_MaxWidth__3T-fF",Small:"Button_Small__1XZ4k",Medium:"Button_Medium__3s-m3",Large:"Button_Large__1DGGT",Primary:"Button_Primary__2OfFy",Secondary:"Button_Secondary__2T7uz"}},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(37),c=a.n(i),s=(a(51),a(10)),l=a(11),o=a(13),u=a(12),m=a(14),d=a(38),h=a.n(d),p=a(39),f=a.n(p),g=function(){return r.a.createElement("div",{className:f.a.Logo},r.a.createElement("h1",null,"TV Timer"))},_=function(e){var t=e.getBackdropBaseURL()+e.backdropPath;return Object(n.useEffect)((function(){var a=document.querySelector(".App > div");"/result"===e.pathName?(a.style.setProperty("--backdrop","url(".concat(t,")")),a.style.setProperty("--backdrop-display","block")):(a.style.setProperty("--backdrop","none"),a.style.setProperty("--backdrop-display","none"))})),r.a.createElement("div",{className:h.a.Layout,style:{}},r.a.createElement(g,null),e.children)},E=a(7),T=a.n(E),v=function(e){var t=function(){var t=[T.a.Button];switch(e.maxWidth&&t.push(T.a.MaxWidth),e.type){case"primary":t.push(T.a.Primary);break;case"secondary":t.push(T.a.Secondary)}switch(e.size){case"small":t.push(T.a.Small);break;case"medium":t.push(T.a.Medium);break;case"large":t.push(T.a.Large)}return t.join(" ")};switch(e.form){case!0:return r.a.createElement("button",{className:t(),onClick:e.clicked},e.children);default:return r.a.createElement("div",{className:t(),onClick:e.clicked},e.icon," ",e.children)}},b=a(40),y=a.n(b),k=a(17),C=a.n(k),S=function(e){var t=[C.a.Input],a="text";switch(e.class){case"search":t.push(C.a.Search);break;case"time":t.push(C.a.Time),a="time";break;case"break":t.push(C.a.Break)}return"time"===e.class?r.a.createElement("input",{className:t.join(" "),type:a,name:e.name,id:e.name,min:"00:00",max:"23:59",pattern:"[0-9]{2}:[0-9]{2}",required:!0,onChange:e.changed,value:e.value}):r.a.createElement("input",{className:t.join(" "),type:a,name:e.name,id:e.name,placeholder:e.placeholder,maxLength:e.maxLength,onChange:e.changed,value:e.value})},B=function(e){return r.a.createElement("div",{className:y.a.SearchBar},r.a.createElement("form",{onSubmit:e.searchHandler},r.a.createElement(S,{name:"search",class:"search",placeholder:"e.g. Avengers"}),r.a.createElement(v,{type:"primary",size:"medium",form:!0},"Find")))},M=a(19),O=a(20),j=a.n(O),N=function(e){var t=e.title,a=e.title,n=e.posterPath?"".concat(e.getPosterBaseURL(),"/").concat(e.posterPath):"https://via.placeholder.com/500x750.png?text=No+poster+available",i=e.releaseDate.slice(0,4);return r.a.createElement("div",{className:j.a.MediaDetails},r.a.createElement("img",{className:j.a.Poster,src:n,alt:a}),r.a.createElement("p",{className:j.a.Title},t," (",i,")"),r.a.createElement(v,{type:"secondary",size:"small",clicked:e.clicked},e.buttonText))},L=a(41),P=a.n(L);var x=function(e,t,a){var n;return function(){var r=this,i=arguments,c=function(){n=null,a||e.apply(r,i)},s=a&&!n;clearTimeout(n),n=setTimeout(c,t),s&&e.apply(r,i)}}((function(){!function(){var e=document.querySelectorAll("p[class^=MediaDetails_Title]"),t=0;e.forEach((function(e){e.clientHeight>t&&(t=e.clientHeight)})),e.forEach((function(e){e.style.height=t+"px"}))}(),function(){var e=document.querySelectorAll("[class^=MediaDetails_Poster]"),t=0;e.forEach((function(e){e.height>t&&(t=e.height)})),e.forEach((function(e){e.style.height=t+"px"}))}()}),250),w=function(e){var t,a=(t=e.getMinutes(),String(t).padStart(2,"0"));return e.getHours()+":"+a},R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).sortMedia=function(e){return e.sort((function(e,t){return t.release_date.slice(0,4)-e.release_date.slice(0,4)}))},a.generateMedia=function(e){return e.map((function(e){return r.a.createElement(N,{key:e.id,title:e.title,posterPath:e.poster_path,releaseDate:e.release_date,buttonText:"Watch this",clicked:a.props.setCurrentMediaHandler.bind(Object(M.a)(a),e.id),getPosterBaseURL:a.props.getPosterBaseURL})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){x(),window.addEventListener("resize",x)}},{key:"componentDidUpdate",value:function(){x()}},{key:"render",value:function(){var e=this.props.media?this.generateMedia(this.sortMedia(this.props.media)):null;return r.a.createElement("div",{className:P.a.SearchResults},e)}}]),t}(n.Component),D=function(e){return r.a.createElement("div",null,r.a.createElement(B,{searchHandler:e.searchHandler}),r.a.createElement(R,{media:e.media,getPosterBaseURL:e.getPosterBaseURL,setCurrentMediaHandler:e.setCurrentMediaHandler}))},I=a(42),F=a(43);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=a.n(F).a.create({baseURL:"/api/"});H.interceptors.request.use((function(e){return console.log("Starting Request",e),e.params=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(I.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.params),e})),H.interceptors.response.use((function(e){return console.log("Response:",e),e})),H.getConfig=function(){return H.get("/config")},H.findFilms=function(e){return H.get("/search/film?search=".concat(encodeURI(e)))},H.getFilmDetails=function(e){return H.get("/film/".concat(e))};var A=H,W=a(22),z=a(18),q=a.n(z),G=a(24),J=a.n(G),V=function(e){var t=null;switch(e.type){case"start":t="start";break;case"end":t="finish"}return r.a.createElement("div",{className:J.a.TimeInputBlock},r.a.createElement("p",null," I want to ",t," my film at:"),r.a.createElement("div",{className:J.a.TimeInputContainer},r.a.createElement(S,{name:"time-start",class:"time",changed:e.changed,value:e.time}),r.a.createElement(v,{type:"primary",size:"small",maxWidth:!0,clicked:e.clicked},"Calculate")))},X=a(21),Z=a.n(X),$=function(e){return r.a.createElement("div",{className:Z.a.BreakInputBlock},r.a.createElement("div",{className:Z.a.BreakLength},r.a.createElement("p",null," Break length (mins)"),r.a.createElement(S,{name:"break-length",class:"break",maxLength:"2",value:e.breakLength,changed:e.breakLengthChanged})),r.a.createElement("div",{className:Z.a.BreakNo},r.a.createElement("p",null," No. of breaks "),r.a.createElement(S,{name:"break-number",class:"break",maxLength:"2",value:e.breakNum,changed:e.breakNumChanged})))},K=a(6),Q=Object(K.f)((function(e){var t=Object(n.useState)(null),a=Object(W.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)("5"),l=Object(W.a)(s,2),o=l[0],u=l[1],m=Object(n.useState)("2"),d=Object(W.a)(m,2),h=d[0],p=d[1];Object(n.useEffect)((function(){if(null===e.currentMedia)e.history.push("/");else{var t=e.currentMedia.id;A.getFilmDetails(t).then((function(e){return c(e.data)}))}}),[e.currentMedia,e.history]);var f=function(e){var t=e.slice(0,2),a=e.slice(3),n=new Date;return n.setHours(t),n.setMinutes(a),n};return r.a.createElement("div",{className:q.a.TimeCalculator},r.a.createElement("div",{className:q.a.BreakInputContainer},r.a.createElement($,{breakLength:o,breakLengthChanged:function(e){var t=e.target.value;u(t)},breakNum:h,breakNumChanged:function(e){var t=e.target.value;p(t)}})),r.a.createElement("div",{className:q.a.MediaDetailsContainer},r.a.createElement(N,{title:e.currentMedia.title,releaseDate:e.currentMedia.release_date,posterPath:e.currentMedia.poster_path,buttonText:"Go back",getPosterBaseURL:e.getPosterBaseURL,clicked:function(){return e.history.push("/")}})),r.a.createElement("div",{className:q.a.TimeInputContainer},r.a.createElement(V,{type:"start",changed:function(t){var a=t.target.value;e.setChosenStartTimeState(a)},clicked:function(){e.setCurrentCalculationType("end");var t=f(e.startTime);t.setMinutes(t.getMinutes()+(i.runtime+o*h));var a=w(t);e.setCalculatedEndTimeState(a),e.history.push("/result")},time:e.startTime}),r.a.createElement("hr",null),r.a.createElement(V,{type:"end",changed:function(t){var a=t.target.value;e.setChosenEndTimeState(a)},clicked:function(){e.setCurrentCalculationType("start");var t=f(e.endTime);t.setMinutes(t.getMinutes()-(i.runtime+o*h));var a=w(t);e.setCalculatedStartTimeState(a),e.history.push("/result")},time:e.endTime})))})),Y=a(9),ee=a.n(Y),te=function(e){var t="";switch(e.currentCalculationType){case"start":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"To finish your film by",r.a.createElement("span",{className:ee.a.ChosenTime}," ",e.chosenEndTime),", start it at..."),r.a.createElement("p",{className:ee.a.CalculatedTime}," ",e.calculatedStartTime));break;case"end":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"If you start your film at",r.a.createElement("span",{className:ee.a.ChosenTime}," ",e.chosenStartTime),", you'll finish it at..."),r.a.createElement("p",{className:ee.a.CalculatedTime}," ",e.calculatedEndTime))}return r.a.createElement("div",{className:ee.a.FinalResult},t,r.a.createElement("p",null,"Enjoy watching ",r.a.createElement("span",{className:ee.a.Title},e.title,"!")))},ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={config:null,media:null,currentMedia:null,chosenStartTime:"12:00",chosenEndTime:"12:00",calculatedStartTime:null,calculatedEndTime:null,currentCalculationType:null},a.setChosenStartTimeState=function(e){a.setState({chosenStartTime:e})},a.setChosenEndTimeState=function(e){a.setState({chosenEndTime:e})},a.setCalculatedStartTimeState=function(e){a.setState({calculatedStartTime:e})},a.setCalculatedEndTimeState=function(e){a.setState({calculatedEndTime:e})},a.setCurrentCalculationType=function(e){a.setState({currentCalculationType:e})},a.loadNewMedia=function(e){a.setState({media:e.data.results})},a.setCurrentMediaHandler=function(e){var t=a.state.media.find((function(t){return t.id===e}));a.setState({currentMedia:t},a.props.history.push("/calculator"))},a.getPosterBaseURL=function(){if(a.state.config){var e=a.state.config.secure_base_url,t=a.state.config.poster_sizes[4];return"".concat(e,"/").concat(t,"/")}return null},a.getBackdropBaseURL=function(){if(a.state.config){var e=a.state.config.secure_base_url,t=a.state.config.backdrop_sizes[3];return"".concat(e,"/").concat(t,"/")}},a.searchHandler=function(e){e.preventDefault();var t=e.target.elements[0].value;A.findFilms(t).then((function(e){a.loadNewMedia(e)}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;A.getConfig().then((function(t){e.setState({config:t.data.images})})),A.findFilms("avengers").then((function(t){e.loadNewMedia(t)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.currentMedia?this.state.currentMedia.backdrop_path:null,t=this.state.currentMedia?this.state.currentMedia.title:null;return r.a.createElement(_,{getBackdropBaseURL:this.getBackdropBaseURL,backdropPath:e,pathName:this.props.location.pathname},r.a.createElement(K.b,{path:"/",exact:!0},r.a.createElement(D,{searchHandler:this.searchHandler,media:this.state.media,getPosterBaseURL:this.getPosterBaseURL,setCurrentMediaHandler:this.setCurrentMediaHandler})),r.a.createElement(K.b,{path:"/calculator"},r.a.createElement(Q,{currentMedia:this.state.currentMedia,getPosterBaseURL:this.getPosterBaseURL,startTime:this.state.chosenStartTime,endTime:this.state.chosenEndTime,setChosenStartTimeState:this.setChosenStartTimeState.bind(this),setChosenEndTimeState:this.setChosenEndTimeState.bind(this),setCalculatedEndTimeState:this.setCalculatedEndTimeState.bind(this),setCalculatedStartTimeState:this.setCalculatedStartTimeState.bind(this),setCurrentCalculationType:this.setCurrentCalculationType.bind(this)})),r.a.createElement(K.b,{path:"/result"},r.a.createElement(te,{title:t,chosenStartTime:this.state.chosenStartTime,chosenEndTime:this.state.chosenEndTime,calculatedStartTime:this.state.calculatedStartTime,calculatedEndTime:this.state.calculatedEndTime,currentCalculationType:this.state.currentCalculationType})))}}]),t}(n.Component),ne=Object(K.f)(ae),re=a(15),ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1,errorMessage:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement(K.a,{to:"/"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorMessage:e}}}]),t}(n.Component);var ce=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(re.a,null,r.a.createElement(ie,null,r.a.createElement(ne,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports={FinalResult:"FinalResult_FinalResult__1i9bl",ChosenTime:"FinalResult_ChosenTime__1OM6T",CalculatedTime:"FinalResult_CalculatedTime__1N071",Title:"FinalResult_Title__CVy_r"}}},[[46,1,2]]]);
//# sourceMappingURL=main.f780eb74.chunk.js.map